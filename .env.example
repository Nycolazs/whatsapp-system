# ===========================================
# WhatsApp System - Environment Variables
# ===========================================
# Copie este arquivo para .env e configure os valores

# -----------------
# Ambiente
# -----------------
NODE_ENV=development
# Valores: development | production

# -----------------
# Segurança - Sessão
# -----------------
SESSION_SECRET=whatsapp-system-secret-key-fixed-2024
# Em produção, use um valor forte e único (min 32 caracteres aleatórios)
# Exemplo: openssl rand -base64 32

# -----------------
# Segurança - Cookies
# -----------------
# COOKIE_SECURE=1
# Habilite apenas se usar HTTPS (em prod é automático se NODE_ENV=production)

# COOKIE_SAMESITE=lax
# Valores: strict | lax | none
# Default: lax (dev) | strict (prod)

# ALLOW_INSECURE_COOKIES=0
# Quando 1, permite SameSite=none sem HTTPS (apenas dev local)

# -----------------
# Segurança - CORS
# -----------------
# CORS_ORIGIN=https://app.suaempresa.com,https://admin.suaempresa.com
# Lista separada por vírgula de origens permitidas
# Se não definido, permite todas (OK para dev, MUDAR em prod)

# -----------------
# Segurança - Senhas
# -----------------
BCRYPT_ROUNDS=12
# Custo do bcrypt (10-14 recomendado, maior = mais seguro mas mais lento)

# -----------------
# Segurança - Rate Limiting
# -----------------
# LOGIN_RATE_WINDOW_MS=900000
# Janela de tempo para limite de login (default: 15 min = 900000ms)

# LOGIN_RATE_MAX_ATTEMPTS=5
# Tentativas máximas de login por janela (default: 5)

# CREATE_RATE_WINDOW_MS=60000
# Janela para criação de recursos (default: 1 min)

# CREATE_RATE_MAX_ATTEMPTS=10
# Max criações por janela (default: 10)

# GENERAL_RATE_WINDOW_MS=60000
# Janela geral (default: 1 min)

# GENERAL_RATE_MAX_ATTEMPTS=100
# Max requisições gerais por janela (default: 100)

# DISABLE_RATE_LIMIT=0
# Desativa rate limiting (apenas para dev, NUNCA em prod)

# -----------------
# Logging
# -----------------
LOG_LEVEL=info
# Valores: silent | error | warn | info | debug | trace

DEBUG_TICKETS_REPLY=0
# Quando 1, habilita logs extras ao enviar respostas em tickets

DEBUG_MEDIA_LOGS=0
# Quando 1, habilita logs extras ao salvar mídias recebidas

DEBUG_RECEIVE_LOGS=0
# Quando 1, habilita logs extras ao persistir mensagens recebidas

# -----------------
# Servidor
# -----------------
# PORT=3001
# Porta HTTP (default: 3001)

# HTTPS_PORT=3443
# Porta HTTPS (default: 3443)

# HTTPS_KEY_PATH=./key.pem
# Caminho para chave privada SSL

# HTTPS_CERT_PATH=./cert.pem
# Caminho para certificado SSL
# Para gerar certificados self-signed:
# openssl req -x509 -newkey rsa:2048 -nodes -keyout key.pem -out cert.pem -days 365

# SERVE_FRONTEND=0
# Default recomendado: 0 (backend API-only)
# Defina 1 apenas para modo legado (backend servindo frontend)

# FRONTEND_PORT=8080
# Porta do servidor frontend separado (script start-frontend)

JSON_BODY_LIMIT=1mb
# Limite de payload JSON

# -----------------
# SQLite (Sessões)
# -----------------
# SQLITE_SYNCHRONOUS=NORMAL
# Valores: OFF | NORMAL | FULL | EXTRA

# SQLITE_BUSY_TIMEOUT_MS=5000
# Timeout para retry em locks (default: 5000ms)

# SQLITE_WAL_AUTOCHECKPOINT=1000
# Checkpoint automático do WAL (default: 1000 páginas)

# -----------------
# WhatsApp / Contatos
# -----------------
# MAX_PROFILE_PIC_FETCHES=3
# Concorrência máxima para buscar fotos de perfil

# PROFILE_PIC_TTL_MS=21600000
# TTL do cache de fotos de perfil (default: 6h = 21600000ms)

# CLEAR_MEDIA_ON_DISCONNECT=0
# Quando 1, apaga mídias ao desconectar do WhatsApp

# WA_RECONNECT_INITIAL_DELAY_MS=2000
# Delay inicial de reconexão automática

# WA_RECONNECT_MAX_DELAY_MS=30000
# Delay máximo entre tentativas de reconexão (backoff exponencial)

# WA_RECONNECT_MAX_ATTEMPTS=10
# Número de tentativas por ciclo de backoff antes de reiniciar o cálculo

# WA_RECONNECT_BACKOFF_MULTIPLIER=1.5
# Multiplicador exponencial do backoff (1.05 - 4.0)

# WA_RECONNECT_JITTER_PCT=0.15
# Jitter (0 - 0.5) para evitar reconexões simultâneas em massa

# WA_CONNECTING_TIMEOUT_MS=45000
# Tempo máximo em "connecting" sem progresso antes de reiniciar o socket

# WA_HEARTBEAT_INTERVAL_MS=30000
# Intervalo do heartbeat do socket WhatsApp

# WA_HEARTBEAT_MAX_MISSED=3
# Quantidade de heartbeats sem socket OPEN antes de reconectar

# WA_WATCHDOG_INTERVAL_MS=60000
# Intervalo do watchdog de auto-recuperação

# WA_WATCHDOG_STALE_THRESHOLD_MS=90000
# Tempo sem eventos de conexão para o watchdog forçar reconexão

# WA_MAX_CONFLICTS_BEFORE_LOGOUT=3
# Quantos conflitos de sessão consecutivos tolerar antes de limpar auth/QR novo

# WA_VERSION_CACHE_MS=21600000
# TTL do cache da versão do Baileys (default: 6h)
